@using Kontent.Statiq.Html
@model Planty.Models.Product
<main class="content">
    <article class="product content__row content__row--full-width">
        <div class="product__background-left-overlay"></div>
        <div class="product__background-left" style="background-image: url(@Html.GetLink(Html.Site().Settings.BackgroundImagePrimary))"></div>
        <div class="product__background-right" style="background-image: url(@Html.GetLink(Html.Site().Settings.BackgroundImageSecondary))"></div>
        <div class="product__header">
            <a href="@Html.GetLink("/store")" class="product__back-to-store-link">
                <svg width="20" height="10" viewBox="0 0 20 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.73859 4.30914H19.75V5.59286H2.63961L6.06986 8.98864L5.17449 9.875L0.25 5L5.17449 0.125L6.06986 1.01136L2.73859 4.30914Z" fill="#88DD9B"/>
                </svg>                        
                see all products
            </a>
        </div>
        <figure class="product__figure">
            <planty-picture src="@Model.Image.First().Url" alt="@Model.Title" css-class="product__image"/>
        </figure>
        <div class="product__details">
            <h1 class="product__title">
                @Model.Title
            </h1>
            @* TODO : categories
        {% if page.params.category %}
            {% set category_page = getPageByFilePath(page.params.category) %}
            <h2 class="product__category">
                <a href="{{ category_page.url | relative_url }}"> {{ category_page.title }} </a>
            </h2>
        {% endif %}*@
            <div class="product__price">
                <price value="Model.Price" />
            </div>

            <section class="product__description">
                @Model.Description
            </section>
            <partial name="buy_button" />
            <section class="product__content">
                @Html.DisplayFor(m => m.Content)
            </section>
    
        </div>
    </article>
@* 
    {% if page.params.category %}
        <section class="content__row">
            <h2 class="content__row-title">Related</h2>
            {% set product_pages = getPages('/products') | sort_array('order', 'asc') | where('id', '!=', page.params.id) %}
            {% set category_page = getPageByFilePath(page.params.category) %}
            {% set include_dict = {'product_pages': product_pages, 'category_url': category_page.url, 'cssClass': 'store__product-grid', 'site': site} %}

            {% include "product_grid.html" %}
        </section>
    {% endif %}
    *@
    <a href="@Html.GetLink("/store")" class="content__row content__row--full-width content__row--mb-0 product__back-to-store" style="background-image: url(@Html.GetLink(Html.Site().Settings.BackgroundImageProduct))">
        <svg width="20" height="10" viewBox="0 0 20 10" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.73859 4.30914H19.75V5.59286H2.63961L6.06986 8.98864L5.17449 9.875L0.25 5L5.17449 0.125L6.06986 1.01136L2.73859 4.30914Z" fill="white"/>
        </svg>                        
        see all products
    </a>
</main>
